<!DOCTYPE html>
<html
  lang="{{ site.Language.LanguageCode }}"
  dir="{{ or site.Language.LanguageDirection `ltr` }}">
  <head>
    <script>
      // Prevent flash of wrong theme
      (function() {
        const theme = localStorage.getItem('theme') || 'light';
        if (theme === 'dark') {
          document.documentElement.classList.add('dark');
        }
      })();
    </script>
    {{ partial "head.html" . }} 
    
    {{ $aureliaFiles := readDir "static/aurelia2" }}
    {{ range $aureliaFiles }}
      {{ if findRE "main-.*\\.js$" .Name }}
        <script type="module" src="{{ (printf "aurelia2/%s" .Name) | relURL }}" async></script>
      {{ end }}
    {{ end }}
  </head>
  <body class="bg-white dark:bg-gray-950 text-gray-900 dark:text-white transition-colors duration-200">
    {{ partial "header.html" . }}

    {{ block "main" . }}{{ end }}

    <footer class="content-footer" id="app-footer">
      {{ partial "footer.html" . }}
    </footer>

    {{ partial "search-panel.html" . }}

    <script src="{{ "js/search.js" | relURL }}"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-38441871-6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    </script>
  </body>
</html>
